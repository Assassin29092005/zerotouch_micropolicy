<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZeroTouch MicroPolicy</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#218396">
</head>
<body>
    <!-- Navigation Header -->
    <header class="navbar">
        <div class="container">
            <div class="navbar-content">
                <div class="logo">
                    <span class="logo-icon">‚ö°</span>
                    <span class="logo-text">ZeroTouch</span>
                </div>
                <nav class="nav-links">
                    <button class="nav-link" data-page="home">Home</button>
                    <button class="nav-link" data-page="policies">Policies</button>
                    <button class="nav-link" data-page="dashboard">Dashboard</button>
                    <button class="nav-link" data-page="customer-login" id="customer-nav-link">Login</button>
                    <button class="nav-link" data-page="admin-login" id="admin-nav-link">Admin</button>
                    <button class="nav-link logout-btn" id="logout-btn" style="display: none;">Logout</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Landing/Onboarding Page -->
    <main class="page active" id="home-page">
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">Buy in seconds. Learn in AR. Get paid without pressing a button.</h1>
                    <p class="hero-subtitle">Experience the future of micro-insurance with instant payouts powered by AI and blockchain technology.</p>
                    <div class="hero-features">
                        <div class="feature">
                            <span class="feature-icon">‚ö°</span>
                            <span>Instant Purchase</span>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">üîí</span>
                            <span>Fraud Resistant</span>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">üöÄ</span>
                            <span>Zero Touch Claims</span>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-large" id="get-started-btn">Get Started</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Customer Login Page -->
    <main class="page" id="customer-login-page">
        <div class="container">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <h1>üë§ Customer Login</h1>
                        <p>Access your ZeroTouch policies</p>
                    </div>
                    <form class="auth-form" id="customer-login-form">
                        <div class="form-group">
                            <label for="customer-email">Email</label>
                            <input type="email" id="customer-email" name="email" required placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label for="customer-password">Password</label>
                            <input type="password" id="customer-password" name="password" required placeholder="Enter your password">
                        </div>
                        <button type="submit" class="btn btn-primary btn-large">Login</button>
                        <div class="auth-switch">
                            <p>Don't have an account? <a href="#" id="show-signup">Sign up here</a></p>
                        </div>
                        <div class="demo-credentials">
                            <small>Demo: demo@test.com / password123</small>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Customer Signup Page -->
    <main class="page" id="customer-signup-page">
        <div class="container">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <h1>üìù Create Account</h1>
                        <p>Join ZeroTouch MicroPolicy</p>
                    </div>
                    <form class="auth-form" id="customer-signup-form">
                        <div class="form-group">
                            <label for="signup-username">Username</label>
                            <input type="text" id="signup-username" name="username" required placeholder="Choose a username">
                        </div>
                        <div class="form-group">
                            <label for="signup-email">Email</label>
                            <input type="email" id="signup-email" name="email" required placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label for="signup-password">Password</label>
                            <input type="password" id="signup-password" name="password" required placeholder="Create a password" minlength="6">
                        </div>
                        <div class="form-group">
                            <label for="confirm-password">Confirm Password</label>
                            <input type="password" id="confirm-password" name="confirmPassword" required placeholder="Confirm your password">
                        </div>
                        <button type="submit" class="btn btn-primary btn-large">Create Account</button>
                        <div class="auth-switch">
                            <p>Already have an account? <a href="#" id="show-login">Login here</a></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Policy Selection Page -->
    <main class="page" id="policies-page">
        <div class="container">
            <div class="page-header">
                <h1>Choose Your MicroPolicy</h1>
                <p>Ultra-short-term, event-specific coverage starting from ‚Çπ5</p>
            </div>
            <div class="policies-grid" id="policies-grid">
                <!-- Policies will be injected here by JavaScript -->
            </div>
        </div>
    </main>

    <!-- AR Explainer Page -->
    <main class="page" id="ar-page">
        <div class="container">
            <div class="ar-container">
                <div class="ar-header">
                    <h1>How Your Policy Works</h1>
                    <p>Interactive AR explanation of your coverage</p>
                </div>
                <div class="ar-viewer">
                    <div class="ar-scene" id="ar-scene">
                        <div class="ar-step" data-step="1">
                            <div class="ar-icon">üì±</div>
                            <h3>Policy Active</h3>
                            <p>Your policy is monitoring official data sources</p>
                        </div>
                        <div class="ar-step" data-step="2">
                            <div class="ar-icon">üåê</div>
                            <h3>Event Detection</h3>
                            <p>API validates the triggering event automatically</p>
                        </div>
                        <div class="ar-step" data-step="3">
                            <div class="ar-icon">üí∞</div>
                            <h3>Instant Payout</h3>
                            <p>Money transfers to your account immediately</p>
                        </div>
                    </div>
                    <div class="ar-controls">
                        <button class="btn btn-secondary" id="ar-replay">Replay Animation</button>
                        <button class="btn btn-primary" id="ar-continue">Continue to Purchase</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Policy Dashboard Page -->
    <main class="page" id="dashboard-page">
        <div class="container">
            <div class="page-header">
                <h1>Your Policies</h1>
                <p>Track your active coverage and payouts</p>
            </div>
            <div class="dashboard-content">
                <div class="user-welcome" id="user-welcome" style="display: none;">
                    <h2>Welcome, <span id="username-display"></span>!</h2>
                </div>
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <h3 id="active-policies-count">0</h3>
                        <p>Active Policies</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-coverage">‚Çπ0</h3>
                        <p>Total Coverage</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="payouts-received">‚Çπ0</h3>
                        <p>Payouts Received</p>
                    </div>
                </div>
                <div class="policies-list" id="user-policies-list">
                    <!-- User policies will be injected here -->
                </div>
            </div>
        </div>
    </main>

    <!-- Admin Login Page -->
    <div id="admin-login-page" class="page">
        <div class="auth-container">
            <div class="auth-card">
                <h2>üîê Admin Access</h2>
                <form id="admin-login-form">
                    <div class="form-group">
                        <input type="text" id="admin-username" placeholder="Admin Username" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="admin-password" placeholder="Admin Password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Login as Admin</button>
                    <div class="error-message" style="display: none;"></div>
                </form>
            
                <!-- ADD THIS SIGNUP LINK -->
                <div class="auth-switch">
                    <p>Need admin access? <a href="#" id="show-admin-signup">Request Admin Account</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- ADD NEW ADMIN SIGNUP PAGE -->
    <div id="admin-signup-page" class="page">
        <div class="auth-container">
            <div class="auth-card">
                <h2>üîë Admin Signup</h2>
                <form id="admin-signup-form">
                    <div class="form-group">
                        <input type="text" id="admin-signup-username" placeholder="Admin Username" required>
                    </div>
                    <div class="form-group">
                        <input type="email" id="admin-signup-email" placeholder="Admin Email" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="admin-signup-password" placeholder="Admin Password" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="admin-passkey" placeholder="Admin Passkey (Required)" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Create Admin Account</button>
                    <div class="error-message" style="display: none;"></div>
                </form>
                <div class="auth-switch">
                    <p>Already have admin access? <a href="#" id="show-admin-login">Back to Login</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced admin demo page -->
    <div id="demo-page" class="page">
        <div class="demo-container">
            <div class="demo-header">
                <h2>üéØ Admin Control Panel</h2>
                <div class="admin-user">
                    <span id="admin-user-display">Admin</span>
                    <button id="admin-logout" class="btn btn-secondary">Logout</button>
                </div>
            </div>

            <!-- POLICY STATISTICS SECTION -->
            <div class="admin-stats-section">
                <h3>üìä Policy Statistics</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h4>Rain Delay Cover</h4>
                     <span id="rain-policy-count">0</span> active
                </div>
                    <div class="stat-card">
                     <h4>Flight Delay Cover</h4>
                     <span id="flight-policy-count">0</span> active
                    </div>
                    <div class="stat-card">
                        <h4>Traffic Jam Cover</h4>
                       <span id="traffic-policy-count">0</span> active
                    </div>
                   <div class="stat-card">
                        <h4>Package Delay Cover</h4>
                        <span id="package-policy-count">0</span> active
                    </div>
                </div>
            </div>

            <!-- POLICY MANAGEMENT SECTION -->
            <div class="admin-policies-section">
                <h3>üõ†Ô∏è Policy Management</h3>
                <!-- Create New Policy -->
                <div class="policy-management-card">
                    <h4>Create New Policy Type</h4>
                    <form id="create-policy-form">
                        <input type="text" id="new-policy-name" placeholder="Policy Name" required>
                        <input type="number" id="new-policy-price" placeholder="Price" required>
                        <input type="text" id="new-policy-description" placeholder="Description" required>
                        <input type="text" id="new-policy-icon" placeholder="Icon (emoji)" required>
                        <button type="submit" class="btn btn-success">Create Policy</button>
                    </form>
                </div>

                <!-- Manage Existing Policies -->
                <div class="policy-management-card">
                    <h4>Manage Existing Policies</h4>
                    <div id="admin-policy-list">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- EVENT SIMULATION SECTION -->
            <div class="demo-section">
                <h3>üéÆ Event Simulation</h3>
                <div class="demo-buttons">
                    <button class="demo-btn rain" data-event="rain">
                        üåßÔ∏è Trigger Rain Event
                    </button>
                    <button class="demo-btn flight" data-event="flight">
                        ‚úàÔ∏è Trigger Flight Delay
                    </button>
                    <button class="demo-btn traffic" data-event="traffic">
                        üöó Trigger Traffic Jam
                    </button>
                    <button class="demo-btn fake" data-event="fake">
                        üö´ Test Fraud Detection
                    </button>
                </div>
            </div>

            <!-- EVENT LOG -->
            <div class="demo-log">
                <h3>üìù Event Log</h3>
                <div id="log-entries">
                    <div class="placeholder">No events triggered yet.</div>
                </div>
            </div>
        </div>
    </div>

    
    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Processing...</p>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/policies.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
